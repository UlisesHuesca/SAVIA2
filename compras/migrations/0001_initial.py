# Generated by Django 3.2.5 on 2022-09-02 02:10

from decimal import Decimal
from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import djmoney.models.fields
import simple_history.models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('requisiciones', '0001_initial'),
        ('user', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Banco',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=10, null=True, unique=True)),
            ],
        ),
        migrations.CreateModel(
            name='Compra',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('folio', models.CharField(max_length=7, null=True)),
                ('complete', models.BooleanField(default=False)),
                ('created_at', models.DateField(auto_now_add=True)),
                ('created_time', models.TimeField(auto_now_add=True)),
                ('autorizado_date1', models.DateField(blank=True, null=True)),
                ('autorizado_hora1', models.TimeField(blank=True, null=True)),
                ('autorizado1', models.BooleanField(default=None, null=True)),
                ('autorizado_date2', models.DateField(blank=True, null=True)),
                ('autorizado_hora2', models.TimeField(blank=True, null=True)),
                ('autorizado2', models.BooleanField(default=None, null=True)),
                ('dias_de_credito', models.PositiveIntegerField(blank=True, null=True)),
                ('tipo_de_cambio_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('tipo_de_cambio', djmoney.models.fields.MoneyField(blank=True, decimal_places=4, default_currency='MXN', max_digits=14, null=True)),
                ('anticipo', models.BooleanField(default=False)),
                ('monto_anticipo_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('monto_anticipo', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('dias_de_entrega', models.PositiveIntegerField(blank=True, null=True)),
                ('impuesto', models.BooleanField(default=False)),
                ('impuestos_adicionales_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('impuestos_adicionales', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('flete', models.BooleanField(default=False)),
                ('costo_fletes_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('costo_fletes', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('tesoreria_matriz', models.BooleanField(default=False)),
                ('opciones_condiciones', models.CharField(blank=True, max_length=250, null=True)),
                ('factura_pdf', models.FileField(blank=True, null=True, upload_to='facturas', validators=[django.core.validators.FileExtensionValidator(['pdf'])])),
                ('factura_xml', models.FileField(blank=True, null=True, upload_to='xml', validators=[django.core.validators.FileExtensionValidator(['xml'])])),
                ('costo_oc_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('costo_oc', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('costo_iva_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('costo_iva', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('pagada', models.BooleanField(default=False)),
                ('monto_pagado_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('monto_pagado', djmoney.models.fields.MoneyField(decimal_places=2, default=Decimal('0'), default_currency='MXN', max_digits=14)),
                ('entrada_completa', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='Cond_credito',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=20)),
            ],
        ),
        migrations.CreateModel(
            name='Estatus_proveedor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=10, null=True, unique=True)),
            ],
        ),
        migrations.CreateModel(
            name='Moneda',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=20)),
            ],
        ),
        migrations.CreateModel(
            name='Proveedor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=100, null=True, unique=True)),
                ('rfc', models.CharField(max_length=13, null=True, unique=True)),
            ],
        ),
        migrations.CreateModel(
            name='Uso_cfdi',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=3, null=True)),
                ('descripcion', models.CharField(max_length=30, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='Proveedor_completo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('domicilio', models.CharField(max_length=200, null=True)),
                ('contacto', models.CharField(max_length=50, null=True)),
                ('email', models.EmailField(max_length=254, null=True)),
                ('clabe', models.CharField(max_length=20, null=True)),
                ('cuenta', models.CharField(max_length=20, null=True)),
                ('financiamiento', models.BooleanField(default=False, null=True)),
                ('dias_credito', models.PositiveIntegerField(null=True)),
                ('banco', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='compras.banco')),
                ('distrito', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='user.distrito')),
                ('estatus', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='compras.estatus_proveedor')),
                ('nombre', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='compras.proveedor')),
            ],
        ),
        migrations.CreateModel(
            name='HistoricalProveedor_completo',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('domicilio', models.CharField(max_length=200, null=True)),
                ('contacto', models.CharField(max_length=50, null=True)),
                ('email', models.EmailField(max_length=254, null=True)),
                ('clabe', models.CharField(max_length=20, null=True)),
                ('cuenta', models.CharField(max_length=20, null=True)),
                ('financiamiento', models.BooleanField(default=False, null=True)),
                ('dias_credito', models.PositiveIntegerField(null=True)),
                ('history_change_reason', models.TextField(null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField()),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('banco', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='compras.banco')),
                ('distrito', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='user.distrito')),
                ('estatus', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='compras.estatus_proveedor')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('nombre', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='compras.proveedor')),
            ],
            options={
                'verbose_name': 'historical proveedor_completo',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': 'history_date',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalCompra',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('folio', models.CharField(max_length=7, null=True)),
                ('complete', models.BooleanField(default=False)),
                ('created_at', models.DateField(blank=True, editable=False)),
                ('created_time', models.TimeField(blank=True, editable=False)),
                ('autorizado_date1', models.DateField(blank=True, null=True)),
                ('autorizado_hora1', models.TimeField(blank=True, null=True)),
                ('autorizado1', models.BooleanField(default=None, null=True)),
                ('autorizado_date2', models.DateField(blank=True, null=True)),
                ('autorizado_hora2', models.TimeField(blank=True, null=True)),
                ('autorizado2', models.BooleanField(default=None, null=True)),
                ('dias_de_credito', models.PositiveIntegerField(blank=True, null=True)),
                ('tipo_de_cambio_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('tipo_de_cambio', djmoney.models.fields.MoneyField(blank=True, decimal_places=4, default_currency='MXN', max_digits=14, null=True)),
                ('anticipo', models.BooleanField(default=False)),
                ('monto_anticipo_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('monto_anticipo', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('dias_de_entrega', models.PositiveIntegerField(blank=True, null=True)),
                ('impuesto', models.BooleanField(default=False)),
                ('impuestos_adicionales_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('impuestos_adicionales', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('flete', models.BooleanField(default=False)),
                ('costo_fletes_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('costo_fletes', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('tesoreria_matriz', models.BooleanField(default=False)),
                ('opciones_condiciones', models.CharField(blank=True, max_length=250, null=True)),
                ('history_change_reason', models.TextField(null=True)),
                ('factura_pdf', models.TextField(blank=True, max_length=100, null=True, validators=[django.core.validators.FileExtensionValidator(['pdf'])])),
                ('factura_xml', models.TextField(blank=True, max_length=100, null=True, validators=[django.core.validators.FileExtensionValidator(['xml'])])),
                ('costo_oc_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('costo_oc', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('costo_iva_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('costo_iva', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('pagada', models.BooleanField(default=False)),
                ('monto_pagado_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('monto_pagado', djmoney.models.fields.MoneyField(decimal_places=2, default=Decimal('0'), default_currency='MXN', max_digits=14)),
                ('entrada_completa', models.BooleanField(default=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField()),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('cond_de_pago', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='compras.cond_credito')),
                ('creada_por', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='user.profile')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('moneda', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='compras.moneda')),
                ('oc_autorizada_por', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='user.profile')),
                ('oc_autorizada_por2', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='user.profile')),
                ('proveedor', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='compras.proveedor_completo')),
                ('req', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='requisiciones.requis')),
                ('uso_del_cfdi', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='compras.uso_cfdi')),
            ],
            options={
                'verbose_name': 'historical compra',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': 'history_date',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalArticuloComprado',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('cantidad', models.PositiveIntegerField(blank=True, null=True)),
                ('cantidad_pendiente', models.PositiveIntegerField(blank=True, null=True)),
                ('entrada_completa', models.BooleanField(default=False)),
                ('precio_unitario_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('precio_unitario', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('history_change_reason', models.TextField(null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField()),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('oc', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='compras.compra')),
                ('producto', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='requisiciones.articulosrequisitados')),
            ],
            options={
                'verbose_name': 'historical articulo comprado',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': 'history_date',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.AddField(
            model_name='compra',
            name='cond_de_pago',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='compras.cond_credito'),
        ),
        migrations.AddField(
            model_name='compra',
            name='creada_por',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='Generacion', to='user.profile'),
        ),
        migrations.AddField(
            model_name='compra',
            name='moneda',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='compras.moneda'),
        ),
        migrations.AddField(
            model_name='compra',
            name='oc_autorizada_por',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='Aprobacion', to='user.profile'),
        ),
        migrations.AddField(
            model_name='compra',
            name='oc_autorizada_por2',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='Aprobacion2', to='user.profile'),
        ),
        migrations.AddField(
            model_name='compra',
            name='proveedor',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='compras.proveedor_completo'),
        ),
        migrations.AddField(
            model_name='compra',
            name='req',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='requisiciones.requis'),
        ),
        migrations.AddField(
            model_name='compra',
            name='uso_del_cfdi',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='compras.uso_cfdi'),
        ),
        migrations.CreateModel(
            name='ArticuloComprado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cantidad', models.PositiveIntegerField(blank=True, null=True)),
                ('cantidad_pendiente', models.PositiveIntegerField(blank=True, null=True)),
                ('entrada_completa', models.BooleanField(default=False)),
                ('precio_unitario_currency', djmoney.models.fields.CurrencyField(choices=[('MXN', 'Peso mexicano'), ('USD', 'US Dollar')], default='MXN', editable=False, max_length=3)),
                ('precio_unitario', djmoney.models.fields.MoneyField(blank=True, decimal_places=2, default_currency='MXN', max_digits=14, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('oc', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='compras.compra')),
                ('producto', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='requisiciones.articulosrequisitados')),
            ],
        ),
    ]
